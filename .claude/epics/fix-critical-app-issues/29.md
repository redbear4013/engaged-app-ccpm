---
name: Filter Invalid Events in Queries
status: open
created: 2025-10-05T15:25:19Z
updated: 2025-10-05T15:51:25Z
github: https://github.com/redbear4013/engaged-app-ccpm/issues/29
depends_on: [28]
parallel: false
conflicts_with: []
---

# Task 006: Filter Invalid Events in Queries

## Priority
P1

## Description
Update all event queries throughout the application to exclude events marked as invalid. This ensures the UI only displays real events and filters out navigation menus and static pages.

## Acceptance Criteria
- [ ] AI match feed shows only real events (no navigation menus)
- [ ] Calendar displays only valid saved events
- [ ] Event lists exclude event_type='invalid'
- [ ] All Supabase queries use `.neq('event_type', 'invalid')`

## Technical Details

### Implementation Steps
1. Update `loadEvents()` in `ai-matching-service.ts`
2. Add filter to `loadSavedEvents()` in `ai-matching-service.ts`
3. Update calendar event queries in `src/lib/supabase/calendar.ts`
4. Review and update any other event queries in hooks
5. Test AI match feed displays correctly
6. Verify calendar shows only valid events

### Files Affected
- `src/services/ai-matching-service.ts`
- `src/lib/supabase/calendar.ts`
- `src/hooks/use-events.ts`

### Query Filter Pattern
```typescript
.neq('event_type', 'invalid')
```

## Effort Estimate
S (4-6 hours)

## Notes
- Depends on Task 005 completing first (database cleanup)
- Sequential task - cannot run until invalid events are marked
- Must update ALL event queries for consistency
- Test thoroughly to ensure no invalid events appear in UI
